// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id             Int              @id @default(autoincrement())
  name           String
  email          String           @unique
  activities     Activity[]       // Oluşturduğu etkinlikler
  participations Participation[] // Katıldığı etkinlikler
  createdAt      DateTime         @default(now())
}

model Activity {
  id             Int                @id @default(autoincrement())
  title          String
  description    String?
  type           ActivityType
  status         ActivityStatus
  category       ActivityCategory
  targetGroup    TargetGroup
  lat            Float
  lng            Float
  locationName   String?
  date           DateTime
  startTime      String?
  endTime        String?
  difficulty     DifficultyLevel
  imageUrl       String?
  beforeImage    String?
  afterImage     String?
  toolsRequired  String[]
  volunteersNeed Int
  volunteersMax  Int?
  place          Alan               @relation(fields: [alanId], references: [id])
  alanId         Int
  createdBy      User               @relation(fields: [createdById], references: [id])
  createdById    Int
  participants   Participation[]
  createdAt      DateTime           @default(now())
}

model Participation {
  id         Int      @id @default(autoincrement())
  user       User     @relation(fields: [userId], references: [id])
  userId     Int
  activity   Activity @relation(fields: [activityId], references: [id])
  activityId Int
  joinedAt   DateTime @default(now())
}

model Alan {
  id          Int         @id @default(autoincrement())
  name        String      // örnek: "Yanan Bölge 1", "Dikim Alanı 2", "Serbest Alan 3"
  type        AlanType    // YANAN, DIKIM_YAPILAN veya FREE
  coordinates Json        // GeoJSON formatında ya da [lat, lng] dizisi
  activities  Activity[]
  createdAt   DateTime    @default(now())
}

enum ActivityType {
  FIDAN
  TEMIZLIK
  DESTEK
  PSIKOLOJIK_DESTEK
  SU_TASIMA
}

enum ActivityStatus {
  AKTIF
  DOLDU
  IPTAL
}

enum ActivityCategory {
  COCUK_DOSTU
  YETISKIN
  AILE
  GRUP
  BIREYSEL
}

enum TargetGroup {
  GENCLER
  YETISKINLER
  AILELER
  HERKES
}

enum DifficultyLevel {
  KOLAY
  ORTA
  ZOR
}

enum AlanType {
  YANAN
  DIKIM_YAPILAN
  FREE  // Yeni eklenen serbest alan tipi
}


